{"ast":null,"code":"var _jsxFileName = \"/Users/yeongmo/Documents/Programming/timeline/timeline/src/components/Article.js\";\nimport React, { Component } from 'react';\nimport { getToken, getUser } from '../authentication';\nimport { Avatar, Icon, Row, Col, Button, Popconfirm, notification } from 'antd';\nimport FbImageLibrary from 'react-fb-image-grid';\nimport CommentModal from './CommentModal';\nimport { history } from '../History';\nimport { Link } from \"react-router-dom\";\nimport './Article.css'; //소식 삭제 알림\n\nconst openNotificationWithIcon = type => {\n  notification[type]({\n    message: '소식 삭제 성공!',\n    description: '당신의 소식이 더이상 친구들에게 공유되지 않습니다!'\n  });\n};\n\nclass Article extends Component {\n  constructor(props) {\n    super(props); //liked를 \"true\" or \"false\"로 받음\n\n    this.state = {};\n\n    this.likeClick = () => {\n      fetch(\"http://localhost:8080/liked/\" + this.state.articleID + \"/\" + getUser().userID, {\n        method: 'PUT',\n        headers: {\n          'token': getToken()\n        }\n      });\n\n      if (this.state.liked == \"true\") {\n        //좋아요 취소\n        this.setState({\n          like: this.state.like - 1,\n          liked: \"false\"\n        });\n      } else {\n        this.setState({\n          like: this.state.like + 1,\n          liked: \"true\"\n        });\n      }\n    };\n\n    this.getPhoto = photoArr => {\n      if (photoArr == null || photoArr == [] || photoArr == \"\") {\n        return null;\n      }\n\n      let result = [];\n      photoArr.map(photo => result.push('http://localhost:8080/photo/download?filename=' + photo));\n      return React.createElement(FbImageLibrary, {\n        images: result,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      });\n    };\n\n    this.getOnePhoto = (fileName, username) => {\n      if (fileName === \"\" || fileName == null) return React.createElement(Avatar, {\n        size: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, username);else return React.createElement(Avatar, {\n        size: \"large\",\n        src: 'http://localhost:8080/photo/download?filename=' + fileName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      });\n    };\n\n    this.getDate = date => {\n      return date;\n    };\n\n    this.confirm = e => {\n      fetch(\"http://localhost:8080/article/\" + this.state.articleID + \"/\" + getUser().userID, {\n        method: 'DELETE',\n        headers: {\n          'token': getToken()\n        }\n      }).then(response => {\n        if (response.status == 200) {\n          openNotificationWithIcon('success');\n          this.props.deleteArticle(this.props.article);\n        } else {//오류 처리\n        }\n      });\n    };\n\n    this.cancel = e => {\n      console.log(e);\n    };\n\n    this.deleteButton = (userID, articleUserID) => {\n      if (userID == articleUserID) {\n        return React.createElement(Popconfirm, {\n          title: \"\\uC774 \\uC18C\\uC2DD\\uC744 \\uC0AD\\uC81C\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\",\n          onConfirm: this.confirm,\n          onCancel: this.cancel,\n          okText: \"Yes\",\n          cancelText: \"No\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: \"#\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, \"X\"));\n      } else {\n        return null;\n      }\n    };\n\n    this.clickName = () => {\n      history.push('/home/' + this.state.articleUserID);\n    };\n\n    this.state = {\n      articleUserID: this.props.article.userID,\n      articleUsername: this.props.article.username,\n      articleUserprofile: this.props.article.profile,\n      articleID: this.props.article.articleID,\n      content: this.props.article.content.split('<br>').map((line, i) => {\n        return React.createElement(\"span\", {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37\n          },\n          __self: this\n        }, line, React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37\n          },\n          __self: this\n        }));\n      }),\n      //줄바꾸기 변환 : 글 입력할 때 db에는 \\n을 <br>로 바꾸어 저장 한 다음에 이걸 다시 줄바꿈 해서 출력해줘야 하므로\n      like: this.props.article.like,\n      liked: this.props.article.liked,\n      // \"true\" 혹은 \"false\"의 문자열로 받아옴\n      photo: this.props.article.photo,\n      createdtime: this.props.article.createdtime\n    };\n  } //좋아요 클릭했을 경우\n\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"article\",\n      id: \"box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"inline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, this.getOnePhoto(this.state.articleUserprofile, this.state.articleUsername)), React.createElement(\"div\", {\n      className: \"inline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"titlAndDate\",\n      id: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(Link, {\n      onClick: this.clickName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, this.state.articleUsername)))), React.createElement(Col, {\n      span: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"inline rightAlign\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, this.deleteButton(getUser().userID, this.state.articleUserID))))), React.createElement(\"div\", {\n      className: \"titlAndDate\",\n      id: \"date\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, this.getDate(this.state.createdtime))), React.createElement(\"div\", {\n      className: \"margin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, this.state.content), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, this.getPhoto(this.state.photo)), React.createElement(\"div\", {\n      className: \"margin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"like\",\n      theme: \"twoTone\",\n      twoToneColor: \"#eb2f96\",\n      width: \"200px\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"margin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, this.state.like)), React.createElement(\"div\", {\n      className: \"margin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: this.state.liked == \"true\" ? \"primary\" : \"default\",\n      icon: \"like\",\n      onClick: this.likeClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"\\uC88B\\uC544\\uC694\"))), React.createElement(Col, {\n      span: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(CommentModal, {\n      articleID: this.state.articleID,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nexport default Article;","map":{"version":3,"sources":["/Users/yeongmo/Documents/Programming/timeline/timeline/src/components/Article.js"],"names":["React","Component","getToken","getUser","Avatar","Icon","Row","Col","Button","Popconfirm","notification","FbImageLibrary","CommentModal","history","Link","openNotificationWithIcon","type","message","description","Article","constructor","props","state","likeClick","fetch","articleID","userID","method","headers","liked","setState","like","getPhoto","photoArr","result","map","photo","push","getOnePhoto","fileName","username","getDate","date","confirm","e","then","response","status","deleteArticle","article","cancel","console","log","deleteButton","articleUserID","clickName","articleUsername","articleUserprofile","profile","content","split","line","i","createdtime","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { getToken, getUser } from '../authentication';\nimport { Avatar, Icon, Row, Col, Button, Popconfirm, notification } from 'antd';\nimport FbImageLibrary from 'react-fb-image-grid'\nimport CommentModal from './CommentModal';\nimport { history } from '../History';\n\nimport { Link } from \"react-router-dom\";\n\n\nimport './Article.css';\n\n//소식 삭제 알림\nconst openNotificationWithIcon = type => {\n    notification[type]({\n        message: '소식 삭제 성공!',\n        description:\n            '당신의 소식이 더이상 친구들에게 공유되지 않습니다!',\n    });\n};\n\nclass Article extends Component {\n\n    state = {\n    };\n\n    constructor(props) {\n        super(props)\n\n        //liked를 \"true\" or \"false\"로 받음\n        this.state = {\n            articleUserID: this.props.article.userID,\n            articleUsername: this.props.article.username,\n            articleUserprofile: this.props.article.profile,\n            articleID: this.props.article.articleID,\n            content: this.props.article.content.split('<br>').map((line, i) => {\n                return (<span key={i}>{line}<br /></span>);\n            }), //줄바꾸기 변환 : 글 입력할 때 db에는 \\n을 <br>로 바꾸어 저장 한 다음에 이걸 다시 줄바꿈 해서 출력해줘야 하므로\n            like: this.props.article.like,\n            liked: this.props.article.liked, // \"true\" 혹은 \"false\"의 문자열로 받아옴\n            photo: this.props.article.photo,\n            createdtime: this.props.article.createdtime\n        };\n    }\n\n    //좋아요 클릭했을 경우\n    likeClick = () => {\n        fetch(\"http://localhost:8080/liked/\" + this.state.articleID + \"/\" + getUser().userID, {\n            method: 'PUT',\n            headers: {\n                'token': getToken()\n            }\n        })\n        if (this.state.liked == \"true\") {\n            //좋아요 취소\n            this.setState({\n                like: this.state.like - 1,\n                liked: \"false\"\n            })\n        } else {\n            this.setState({\n                like: this.state.like + 1,\n                liked: \"true\"\n            })\n        }\n    }\n\n    //소식에 등록되어 있는 여러개의 사진 받아와서 FbImageLibrary로 출력\n    getPhoto = (photoArr) => {\n        if (photoArr == null || photoArr == [] || photoArr == \"\") {\n            return null;\n        }\n        let result = []\n        photoArr.map(photo => result.push('http://localhost:8080/photo/download?filename=' + photo))\n        return (<FbImageLibrary images={result} />);\n    }\n\n    //프로필 사진을 받아오기\n    getOnePhoto = (fileName, username) => {\n        if (fileName === \"\" || fileName == null)\n            return <Avatar size='large'>{username}</Avatar>\n        else\n            return <Avatar size='large' src={'http://localhost:8080/photo/download?filename=' + fileName} />\n    }\n\n    //날짜를 형식에 맞춰서 문자열로 리턴\n    getDate = (date) => {\n        return date\n    }\n\n    //글 삭제\n    confirm = (e) => {\n        fetch(\"http://localhost:8080/article/\" + this.state.articleID + \"/\" + getUser().userID, {\n            method: 'DELETE',\n            headers: {\n                'token': getToken()\n            }\n        })\n            .then(response => {\n                if (response.status == 200) {\n                    openNotificationWithIcon('success')\n                    this.props.deleteArticle(this.props.article)\n                } else {\n                    //오류 처리\n                }\n            })\n    }\n\n    cancel = (e) => {\n        console.log(e);\n    }\n\n    //소식 삭제 버튼\n    deleteButton = (userID, articleUserID) => {\n        if (userID == articleUserID) {\n            return (\n                <Popconfirm\n                    title=\"이 소식을 삭제하시겠습니까?\"\n                    onConfirm={this.confirm}\n                    onCancel={this.cancel}\n                    okText=\"Yes\"\n                    cancelText=\"No\"\n                >\n                    <a href=\"#\">X</a>\n                </Popconfirm>\n            )\n        } else {\n            return null\n        }\n    }\n\n    //이름클릭했을 때\n    clickName = () => {\n        history.push('/home/' + this.state.articleUserID)\n    }\n\n    render() {\n\n        return (\n            <div className=\"article\" id='box'>\n                <div>\n                    <div className='inline' >\n                        {this.getOnePhoto(this.state.articleUserprofile, this.state.articleUsername)}\n                    </div>\n                    <div className='inline'>\n                        <Row>\n                            <Col span={12}>\n                                <div className='titlAndDate' id='title'>\n                                    <Link onClick={this.clickName} ><b>{this.state.articleUsername}</b></Link>\n                                </div>\n\n                            </Col>\n                            <Col span={12}>\n                                <div className='inline rightAlign'>\n                                    {this.deleteButton(getUser().userID, this.state.articleUserID)}\n                                </div>\n\n                            </Col>\n                        </Row>\n\n                    </div>\n                    <div className='titlAndDate' id='date'>\n                        {this.getDate(this.state.createdtime)}\n                    </div>\n                </div>\n                <div className='margin'>\n                    {this.state.content}\n                </div>\n                <div>\n                    {this.getPhoto(this.state.photo)}\n                </div>\n                <div className='margin'>\n                    <Icon type=\"like\" theme=\"twoTone\" twoToneColor=\"#eb2f96\" width='200px' />\n                    <span className='margin'>{this.state.like}</span>\n                </div>\n                <div className='margin'>\n                    <Row>\n                        <Col span={12}>\n                            <center><Button type={this.state.liked == \"true\" ? \"primary\" : \"default\"} icon=\"like\" onClick={this.likeClick}>좋아요</Button></center>\n                        </Col>\n                        <Col span={12}>\n                            <center><CommentModal articleID={this.state.articleID} /></center>\n                        </Col>\n                    </Row>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Article;"]},"metadata":{},"sourceType":"module"}