{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\uBB34\\\\Desktop\\\\git\\\\ChemicalManagementApplication\\\\Dev\\\\Front\\\\src\\\\components\\\\MyGroupRegister.js\";\nimport React, { Component } from 'react';\nimport { Form, Icon, Input, Button, message, Modal } from 'antd';\nimport { Link } from \"react-router-dom\";\nimport { Typography } from 'antd';\nimport { getUser, getLab } from '../authentication';\nimport { history } from '../History';\nimport { serverUrl } from '../setting';\nimport { login } from '../authentication';\nconst Title = Typography.Title;\n\nclass MyGroupRegister extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      visible: false\n    };\n\n    this.showModal = () => {\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.handleOk = e => {\n      console.log(e);\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.handleCancel = e => {\n      console.log(e);\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.props.form.validateFields((err, values) => {\n        if (!err) {\n          //요청 양식은 이미 values에 동일하게 맞춰져 있는 상태이므로\n          //따로 가공해줄 필요 없이 바로 http 요청을 보낸다\n          console.log(values);\n          fetch(serverUrl + '/lab/' + getLab().id + '/' + getUser().id, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(values)\n          }).then(response => {\n            const result = response.status;\n\n            if (result === 200) {\n              //로그인이 성공하였을 경우\n              response.json().then(response => {\n                //로컬스토리지에 토큰 및 로그인 정보 저장\n                login(response);\n                console.log(response);\n                message.success(response.user.name + '그룹 가입에 성공하였습니다!');\n                this.props.enrollLab(3);\n                history.push(\"/main\");\n              });\n            } else if (result === 401) {\n              //비밀번호 불일치 혹은 이메일이 등록되지 않았음\n              message.error('그룹 가입 신청에 실패하였습니다. 그룹 이름 혹은 그룹 비밀번호를 다시 확인해 주세요.');\n              console.log(\"fail!\");\n            } else {//내부 오류\n            }\n          });\n        }\n      });\n    };\n  }\n\n  render() {\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    return React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      className: \"form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(Form.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, getFieldDecorator('labname', {\n      rules: [{\n        required: true,\n        message: ' Lab 이름을 입력 해 주세요!'\n      }]\n    })(React.createElement(Input, {\n      prefix: React.createElement(Icon, {\n        type: \"user\",\n        style: {\n          color: 'rgba(0,0,0,.25)'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }),\n      placeholder: \"Lab \\uC774\\uB984\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }))), React.createElement(Form.Item, {\n      hasFeedback: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, getFieldDecorator('password', {\n      rules: [{\n        required: true,\n        message: '비밀번호를 입력 해 주세요!'\n      }, {\n        validator: this.validateToNextPassword\n      }]\n    })(React.createElement(Input.Password, {\n      prefix: React.createElement(Icon, {\n        type: \"lock\",\n        style: {\n          color: 'rgba(0,0,0,.25)'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }),\n      placeholder: \"Password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }))), React.createElement(Form.Item, {\n      hasFeedback: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, getFieldDecorator('confirm', {\n      rules: [{\n        required: true,\n        message: '비밀번호를 다시 한번 입력 해 주세요!'\n      }, {\n        validator: this.compareToFirstPassword\n      }]\n    })(React.createElement(Input.Password, {\n      prefix: React.createElement(Icon, {\n        type: \"lock\",\n        style: {\n          color: 'rgba(0,0,0,.25)'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }),\n      placeholder: \"Confirm password\",\n      onBlur: this.handleConfirmBlur,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }))), React.createElement(Form.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"primary\",\n      htmlType: \"submit\",\n      className: \"button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"Register Now!\"), \"Or \", React.createElement(Link, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"login now!\")));\n  }\n\n}\n\nexport default Form.create()(MyGroupRegister);","map":{"version":3,"sources":["C:\\Users\\무\\Desktop\\git\\ChemicalManagementApplication\\Dev\\Front\\src\\components\\MyGroupRegister.js"],"names":["React","Component","Form","Icon","Input","Button","message","Modal","Link","Typography","getUser","getLab","history","serverUrl","login","Title","MyGroupRegister","state","visible","showModal","setState","handleOk","e","console","log","handleCancel","handleSubmit","preventDefault","props","form","validateFields","err","values","fetch","id","method","headers","body","JSON","stringify","then","response","result","status","json","success","user","name","enrollLab","push","error","render","getFieldDecorator","rules","required","color","validator","validateToNextPassword","compareToFirstPassword","handleConfirmBlur","create"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Form, Icon, Input, Button, message, Modal } from 'antd';\r\nimport { Link } from \"react-router-dom\";\r\nimport { Typography } from 'antd';\r\nimport { getUser, getLab } from '../authentication';\r\nimport { history } from '../History';\r\nimport { serverUrl } from '../setting';\r\nimport { login } from '../authentication';\r\n\r\nconst { Title } = Typography;\r\n\r\nclass MyGroupRegister extends Component {\r\n\r\n  state = { visible: false };\r\n\r\n  showModal = () => {\r\n    this.setState({\r\n      visible: true,\r\n    });\r\n  };\r\n\r\n  handleOk = e => {\r\n    console.log(e);\r\n    this.setState({\r\n      visible: false,\r\n    });\r\n\r\n  };\r\n\r\n  handleCancel = e => {\r\n    console.log(e);\r\n    this.setState({\r\n      visible: false,\r\n    });\r\n  };\r\n\r\n\r\n  //로그인 정보 입력 하고 로그인 버튼 눌렀을 때\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        //요청 양식은 이미 values에 동일하게 맞춰져 있는 상태이므로\r\n        //따로 가공해줄 필요 없이 바로 http 요청을 보낸다\r\n        console.log(values)\r\n        fetch(serverUrl + '/lab/' + getLab().id + '/' + getUser().id, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(values)\r\n        })\r\n        .then(response => {\r\n          const result = response.status;\r\n          if (result === 200) {\r\n            //로그인이 성공하였을 경우\r\n            response.json().then(response => {\r\n              //로컬스토리지에 토큰 및 로그인 정보 저장\r\n              login(response)\r\n              console.log(response)\r\n              message.success(response.user.name + '그룹 가입에 성공하였습니다!');\r\n              this.props.enrollLab(3);\r\n              history.push(\"/main\")\r\n            })\r\n          } else if (result === 401) {\r\n            //비밀번호 불일치 혹은 이메일이 등록되지 않았음\r\n            message.error('그룹 가입 신청에 실패하였습니다. 그룹 이름 혹은 그룹 비밀번호를 다시 확인해 주세요.');\r\n            console.log(\"fail!\")\r\n          } else {\r\n            //내부 오류\r\n          }\r\n        })\r\n      }\r\n    });\r\n  };\r\n\r\n\r\n\r\n  render() {\r\n    const { getFieldDecorator } = this.props.form;\r\n    return (\r\n      <Form onSubmit={this.handleSubmit} className=\"form\">\r\n\r\n        {/* 이름 */}\r\n        <Form.Item>\r\n          {getFieldDecorator('labname', {\r\n            rules: [{ required: true, message: ' Lab 이름을 입력 해 주세요!' }],\r\n          })(\r\n            <Input\r\n              prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n              placeholder=\"Lab 이름\"\r\n            />,\r\n          )}\r\n        </Form.Item>\r\n\r\n        {/* 비밀번호1 */}\r\n        <Form.Item hasFeedback>\r\n          {getFieldDecorator('password', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: '비밀번호를 입력 해 주세요!',\r\n              },\r\n              {\r\n                validator: this.validateToNextPassword,\r\n              },\r\n            ],\r\n          })(<Input.Password\r\n            prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n            placeholder=\"Password\" />)}\r\n        </Form.Item>\r\n\r\n        {/* 비밀번호2 */}\r\n        <Form.Item hasFeedback>\r\n          {getFieldDecorator('confirm', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: '비밀번호를 다시 한번 입력 해 주세요!',\r\n              },\r\n              {\r\n                validator: this.compareToFirstPassword,\r\n              },\r\n            ],\r\n          })(<Input.Password\r\n            prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n            placeholder=\"Confirm password\"\r\n            onBlur={this.handleConfirmBlur} />)}\r\n        </Form.Item>\r\n\r\n        {/* 회원가입 버튼 */}\r\n        <Form.Item>\r\n          <Button type=\"primary\" htmlType=\"submit\" className=\"button\">\r\n            Register Now!\r\n                    </Button>\r\n          Or <Link to=\"/login\">login now!</Link>\r\n        </Form.Item>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Form.create()(MyGroupRegister);\r\n"]},"metadata":{},"sourceType":"module"}